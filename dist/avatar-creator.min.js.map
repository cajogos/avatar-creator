{"version":3,"sources":["MiniYou.js","Avatar.js","Canvas.js","Editor.js"],"names":["MINI_YOU","EDITOR","undefined","init","editorElement","canvasElement","Editor","CANVAS","attachListener","Canvas","Avatar","canvas","this","_initDraw","prototype","constructor","POINTS","HEAD","BODY","RIGHT_ARM","RIGHT_LEG","LEFT_LEG","ctx","headPoints","fillStyle","LEFT_ARM","bodyPoints","_canvas","rightLegPoints","get2DContext","strokeStyle","drawPolygon","rightArmPoints","leftArmPoints","leftLegPoints","getContext","_width","width","_init","_avatar","_ctx","fillRect","_height","i","drawLine","j","handleEditorAlert","message","data","console","log","getHeight","beginPath","lineTo","startX","startY","endX","endY","moveTo","closePath","points","fill","stroke","length","curX","curY","_listeners","self","on","e","parseText","_element","keyCode","preventDefault","end","$","get","selectionEnd","val","selectionStart","start","substring","listener","push","_alertListeners","text","jsonText","parse","css","background","color","setText"],"mappings":"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","file":"avatar-creator.min.js","sourcesContent":["let MINI_YOU = {\n    EDITOR: undefined,\n    CANVAS: undefined,\n    initialized: false\n};\n\n/**\n *\n * @param {jQuery|HTMLElement} editorElement\n * @param {jQuery|HTMLElement} canvasElement\n */\nMINI_YOU.init = function (editorElement, canvasElement)\n{\n    MINI_YOU.EDITOR = new MINI_YOU.Editor(editorElement);\n    MINI_YOU.CANVAS = new MINI_YOU.Canvas(canvasElement);\n    MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS);\n    MINI_YOU.initialized = true;\n};","/**\n * @param {MINI_YOU.Canvas} canvas\n * @constructor\n */\nMINI_YOU.Avatar = function(canvas)\n{\n    this._canvas = canvas;\n\n    this._initDraw();\n};\nMINI_YOU.Avatar.prototype.constructor = MINI_YOU.Avatar;\n\nMINI_YOU.Avatar.POINTS = {\n    HEAD: [\n        [192, 64],\n        [288, 64],\n        [288, 160],\n        [192, 160]\n    ],\n    BODY: [\n        [160, 160],\n        [320, 160],\n        [320, 320],\n        [160, 320]\n    ],\n    // Arms\n    RIGHT_ARM: [\n        [96, 160],\n        [160, 160],\n        [160, 320],\n        [96, 320]\n    ],\n    LEFT_ARM: [\n        [320, 160],\n        [384, 160],\n        [384, 320],\n        [320, 320]\n    ],\n    // Legs\n    RIGHT_LEG: [\n        [160, 320],\n        [224, 320],\n        [224, 480],\n        [160, 480]\n    ],\n    LEFT_LEG: [\n        [256, 320],\n        [320, 320],\n        [320, 480],\n        [256, 480]\n    ]\n};\n\nMINI_YOU.Avatar.prototype._initDraw = function()\n{\n    let ctx = this._canvas.get2DContext();\n    ctx.strokeStyle = 'black';\n\n    // Head\n    let headPoints = MINI_YOU.Avatar.POINTS.HEAD;\n    ctx.fillStyle = 'red';\n    this._canvas.drawPolygon(headPoints[0][0], headPoints[0][1], headPoints, true, true);\n\n    // Body\n    let bodyPoints = MINI_YOU.Avatar.POINTS.BODY;\n    ctx.fillStyle = 'blue';\n    this._canvas.drawPolygon(bodyPoints[0][0], bodyPoints[0][1], bodyPoints, true, true);\n\n    // Right Arm\n    let rightArmPoints = MINI_YOU.Avatar.POINTS.RIGHT_ARM;\n    ctx.fillStyle = 'violet';\n    this._canvas.drawPolygon(rightArmPoints[0][0], rightArmPoints[0][1], rightArmPoints, true, true);\n\n    // Left Arm\n    let leftArmPoints = MINI_YOU.Avatar.POINTS.LEFT_ARM;\n    ctx.fillStyle = 'orange';\n    this._canvas.drawPolygon(leftArmPoints[0][0], leftArmPoints[0][1], leftArmPoints, true, true);\n\n    // Right Leg\n    let rightLegPoints = MINI_YOU.Avatar.POINTS.RIGHT_LEG;\n    ctx.fillStyle = 'lime';\n    this._canvas.drawPolygon(rightLegPoints[0][0], rightLegPoints[0][1], rightLegPoints, true, true);\n\n    // Left Leg\n    let leftLegPoints = MINI_YOU.Avatar.POINTS.LEFT_LEG;\n    ctx.fillStyle = 'yellow';\n    this._canvas.drawPolygon(leftLegPoints[0][0], leftLegPoints[0][1], leftLegPoints, true, true);\n};","/**\n * @param canvas\n * @constructor\n */\nMINI_YOU.Canvas = function (canvas)\n{\n    this._canvas = canvas[0];\n    this._ctx = this._canvas.getContext('2d');\n\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n\n    this._init();\n\n    this._avatar = new MINI_YOU.Avatar(this);\n};\nMINI_YOU.Canvas.prototype.constructor = MINI_YOU.Canvas;\n\nMINI_YOU.Canvas.prototype._init = function ()\n{\n    this._ctx.fillStyle = 'white';\n    this._ctx.fillRect(0, 0, this._width, this._height);\n\n    // Draw a grid\n    this._ctx.strokeStyle = '#EAEAEA';\n    let pixel = 32;\n    for (let i = 0; i < this._width; i += pixel)\n    {\n        this.drawLine(i, 0, i, this._height);\n    }\n    for (let j = 0; j < this._height; j += pixel)\n    {\n        this.drawLine(0, j, this._width, j);\n    }\n};\n\n/**\n * @returns {CanvasRenderingContext2D|*}\n */\nMINI_YOU.Canvas.prototype.get2DContext = function ()\n{\n    return this._ctx;\n};\n\nMINI_YOU.Canvas.prototype.handleEditorAlert = function (message, data)\n{\n    console.log('editor alert!', message, data);\n};\n\nMINI_YOU.Canvas.prototype.getWidth = function ()\n{\n    return this._width;\n};\n\nMINI_YOU.Canvas.prototype.getHeight = function ()\n{\n    return this._height;\n};\n\nMINI_YOU.Canvas.prototype.drawLine = function (startX, startY, endX, endY)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n    this._ctx.lineTo(endX, endY);\n    this._ctx.closePath();\n    this._ctx.stroke();\n};\n\nMINI_YOU.Canvas.prototype.drawPolygon = function (startX, startY, points, fill, stroke)\n{\n    this._ctx.beginPath();\n    this._ctx.moveTo(startX, startY);\n\n    for (let i = 0; i < points.length; i++)\n    {\n        let curX = points[i][0];\n        let curY = points[i][1];\n\n        this._ctx.lineTo(curX, curY);\n    }\n    this._ctx.closePath();\n\n    if (fill === true)\n    {\n        this._ctx.fill();\n    }\n\n    if (stroke === true)\n    {\n        this._ctx.stroke();\n    }\n};","MINI_YOU.Editor = function (editorElement)\n{\n    this._element = editorElement;\n\n    this._listeners = [];\n\n    var self = this;\n    this._element.on('keyup', function (e)\n    {\n        self.parseText();\n    });\n    this._element.on('keydown', function (e)\n    {\n        switch (e.keyCode)\n        {\n            case 9: // Tab Key\n                e.preventDefault();\n                var start = $(this).get(0).selectionStart;\n                var end = $(this).get(0).selectionEnd;\n                $(this).val($(this).val().substring(0, start) + \"    \" + $(this).val().substring(end));\n                $(this).get(0).selectionStart = $(this).get(0).selectionEnd = start + 4;\n                break;\n        }\n    });\n};\nMINI_YOU.Editor.prototype.constructor = MINI_YOU.Editor;\n\nMINI_YOU.Editor.prototype.attachListener = function (listener)\n{\n    this._listeners.push(listener);\n};\n\nMINI_YOU.Editor.prototype._alertListeners = function (message, data)\n{\n    for (var i = 0; i < this._listeners.length; i++)\n    {\n        this._listeners[i].handleEditorAlert(message, data);\n    }\n};\n\nMINI_YOU.Editor.prototype.parseText = function ()\n{\n    var text = this._element.val();\n    try\n    {\n        var jsonText = JSON.parse(text);\n        this._element.css({\n            'background': 'black',\n            'color': 'white'\n        });\n\n        this._alertListeners('jsonChanged', jsonText);\n    }\n    catch (e)\n    {\n        this._element.css({\n            'background': 'salmon',\n            'color': 'red'\n        });\n    }\n};\n\nMINI_YOU.Editor.prototype.setText = function (text)\n{\n    this._element.val(text);\n    this.parseText();\n};"]}