{"version":3,"sources":["MiniYou.js","Avatar.js","Canvas.js","Editor.js"],"names":["MINI_YOU","EDITOR","undefined","init","editorElement","canvasElement","Editor","CANVAS","attachListener","Canvas","Avatar","canvas","this","_initDraw","prototype","constructor","ctx","_canvas","get2DContext","fillStyle","fillRect","getWidth","getHeight","getContext","_width","width","_avatar","_ctx","handleEditorAlert","message","data","console","log","drawPolygon","startX","startY","points","fill","curX","curY","lineTo","i","closePath","_listeners","self","on","e","parseText","_element","keyCode","preventDefault","end","$","get","selectionEnd","val","selectionStart","start","substring","listener","push","_alertListeners","length","text","jsonText","parse","css","background","color","setText"],"mappings":"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","file":"avatar-creator.min.js","sourcesContent":["var MINI_YOU = {\n    EDITOR: undefined,\n    CANVAS: undefined,\n    initialized: false\n};\n\n/**\n *\n * @param {jQuery|HTMLElement} editorElement\n * @param {jQuery|HTMLElement} canvasElement\n */\nMINI_YOU.init = function (editorElement, canvasElement)\n{\n    MINI_YOU.EDITOR = new MINI_YOU.Editor(editorElement);\n    MINI_YOU.CANVAS = new MINI_YOU.Canvas(canvasElement);\n    MINI_YOU.EDITOR.attachListener(MINI_YOU.CANVAS);\n    MINI_YOU.initialized = true;\n};","/**\n * @param {MINI_YOU.Canvas} canvas\n * @constructor\n */\nMINI_YOU.Avatar = function(canvas)\n{\n    this._canvas = canvas;\n\n    this._initDraw();\n};\nMINI_YOU.Avatar.prototype.constructor = MINI_YOU.Avatar;\n\nMINI_YOU.Avatar.prototype._initDraw = function()\n{\n    var ctx = this._canvas.get2DContext();\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, this._canvas.getWidth(), this._canvas.getHeight());\n};\n\n\n","/**\n * @param canvas\n * @constructor\n */\nMINI_YOU.Canvas = function(canvas)\n{\n\tthis._canvas = canvas[0];\n\tthis._ctx = this._canvas.getContext('2d');\n\n\tthis._width = this._canvas.width;\n\tthis._height = this._canvas.height;\n\n\tthis._avatar = new MINI_YOU.Avatar(this);\n};\nMINI_YOU.Canvas.prototype.constructor = MINI_YOU.Canvas;\n\n/**\n * @returns {CanvasRenderingContext2D|*}\n */\nMINI_YOU.Canvas.prototype.get2DContext = function()\n{\n\treturn this._ctx;\n};\n\nMINI_YOU.Canvas.prototype.handleEditorAlert = function(message, data)\n{\n\tconsole.log('editor alert!', message, data);\n};\n\nMINI_YOU.Canvas.prototype.getWidth = function()\n{\n\treturn this._width;\n};\n\nMINI_YOU.Canvas.prototype.getHeight = function()\n{\n\treturn this._height;\n};\n\nMINI_YOU.Canvas.prototype.drawPolygon = function(startX, startY, points, fill)\n{\n\tthis._ctx.beginPath();\n\tthis._ctx.moveTo(startX, startY);\n\n\tfor (var i = 0; i < points.length; i++)\n\t{\n\t\tvar curX = points[i][0];\n\t\tvar curY = points[i][1];\n\n\t\tthis._ctx.lineTo(curX, curY);\n\t}\n\tthis._ctx.closePath();\n\n\tif (fill === true)\n\t{\n\t\tthis._ctx.fill();\n\t}\n};","MINI_YOU.Editor = function (editorElement)\n{\n    this._element = editorElement;\n\n    this._listeners = [];\n\n    var self = this;\n    this._element.on('keyup', function (e)\n    {\n        self.parseText();\n    });\n    this._element.on('keydown', function (e)\n    {\n        switch (e.keyCode)\n        {\n            case 9: // Tab Key\n                e.preventDefault();\n                var start = $(this).get(0).selectionStart;\n                var end = $(this).get(0).selectionEnd;\n                $(this).val($(this).val().substring(0, start) + \"    \" + $(this).val().substring(end));\n                $(this).get(0).selectionStart = $(this).get(0).selectionEnd = start + 4;\n                break;\n        }\n    });\n};\nMINI_YOU.Editor.prototype.constructor = MINI_YOU.Editor;\n\nMINI_YOU.Editor.prototype.attachListener = function (listener)\n{\n    this._listeners.push(listener);\n};\n\nMINI_YOU.Editor.prototype._alertListeners = function (message, data)\n{\n    for (var i = 0; i < this._listeners.length; i++)\n    {\n        this._listeners[i].handleEditorAlert(message, data);\n    }\n};\n\nMINI_YOU.Editor.prototype.parseText = function ()\n{\n    var text = this._element.val();\n    try\n    {\n        var jsonText = JSON.parse(text);\n        this._element.css({\n            'background': 'black',\n            'color': 'white'\n        });\n\n        this._alertListeners('jsonChanged', jsonText);\n    }\n    catch (e)\n    {\n        this._element.css({\n            'background': 'salmon',\n            'color': 'red'\n        });\n    }\n};\n\nMINI_YOU.Editor.prototype.setText = function (text)\n{\n    this._element.val(text);\n    this.parseText();\n};"]}